<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head>
		<div th:replace="common/head :: head"></div>
		<title>Login</title>
	</head>
	<body>
<html>
	<div>
		<p th:if="${param.error}">
			Invalid username or password.
		</p>
		<p th:if="${param.logout}">
			You have been logged out.
		</p>
	</div>
</html>
<script th:inline="javascript">
  const token = /*[[${_csrf.token}]]*/;
  const parameterName = /*[[${_csrf.parameterName}]]*/;
  console.log("token:" + token);
</script>

<script type="text/javascript">
webix.ui({
    type:"wide",
    css: "mc_login",
    cols: [
      {},
      {
        rows: [
          {},
          {
            view:"form",
            id:"login_form",
            css: "mc_login_form",
            width:400,
            elements:[
              { view:"label", label:"EMBLOCK", width:400},
              { view:"text", type:"hidden", label:"", name:parameterName, value:token, hidden:true },
              { view:"text", label:"", name:"loginId", id:"loginId", height: 50, placeholder: "계정",required:true,invalidMessage:"계정을 입력해주세요."  },
              { view:"text", type:"password", label:"", name:"password", height: 50, placeholder: "비밀번호" ,required:true,invalidMessage:"비밀번호를 입력해주세요." },
              { view:"button", value:"로그인" , height: 50,
                css: "",
                click: function() {
                  loginProcess();
                }
              }
            ]
          },
          {}
        ]
      },
      {}
    ]
});

$$("login_form").elements["loginId"].focus();

webix.UIManager.addHotKey("enter", function(){
	loginProcess();
});

function loginProcess() {
	var form = $$('login_form')
	if (form.validate()) {
	 	webix.send("/page/login", form.getValues());
	}
};

</script>

</body>
</html>